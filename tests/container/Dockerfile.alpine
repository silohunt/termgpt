# Alpine Linux testing environment for TermGPT
# Minimal, POSIX-compliant environment to ensure compatibility
FROM alpine:latest

# Install essential packages
RUN apk add --no-cache \
    bash \
    curl \
    git \
    jq \
    python3 \
    py3-urllib3 \
    sudo \
    shadow \
    # For clipboard testing (X11)
    xclip \
    # For URL opening testing
    xdg-utils

# Create test user with sudo access
RUN adduser -D testuser && \
    echo "testuser ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# Switch to test user
USER testuser
WORKDIR /home/testuser

# Clone TermGPT from GitHub
RUN git clone https://github.com/silohunt/termgpt.git

WORKDIR /home/testuser/termgpt

# Default shell (test with both sh and bash)
CMD ["/bin/sh"]